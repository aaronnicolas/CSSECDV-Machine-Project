
{{!> header}}

<section class="container my-5">
  <h1 class="mb-4 text-light">🌟 Welcome, Star Overseer <span class="text-warning">{{adminName}}</span></h1>
  
  <nav class="mb-4">
    <ul class="nav nav-pills gap-2">
      <li class="nav-item">
        <a class="nav-link" href="/admin/users">👥 Manage Users</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="/admin/observations">🔭 Manage Observations</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="/admin/reviews">📝 Moderate Wishes</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="/admin/settings">⚙️ Site Settings</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="/admin/analytics">📊 View Analytics</a>
      </li>
    </ul>
  </nav>
  

<!--
  <div class="row g-4">
    {{#each widgets}}
      <div class="col-12 col-md-6 col-lg-4">
        <div class="card h-100 shadow-sm">
          <div class="card-body">
            <h5 class="card-title"><a href="?" class="link-underline-light text-info">{{title}}</a></h5>
            <p class="card-text">{{description}}</p>
          </div>
        </div>
      </div>
    {{/each}}
  </div>
-->
<div class="row g-4">
  {{#each widgets}}
    <div class="col-12 col-md-6 col-lg-4">
      <div class="card h-100 shadow-sm">
        <div class="card-body">
          <h5 class="card-title">
            <a href="{{link}}" class="link-underline-light text-info">{{title}}</a>
          </h5>
          <p class="card-text">{{description}}</p>

          <!-- Quick stats -->
          <div class="mt-3">
            <span class="fw-bold text-primary">{{total}}</span> total  
            <br>
            
            {{#if (gt growth 0)}}
              <span class="fw-bold text-success">▲ {{growth}}%</span> growth
            {{else}}
              <span class="fw-bold text-danger">▼ {{growth}}%</span> decline
            {{/if}}
          </div>

          <!-- Mini chart -->
          <canvas id="chart-{{@index}}" height="80"></canvas>
        </div>
      </div>
    </div>
  {{/each}}
</div>



<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<script>
document.addEventListener("DOMContentLoaded", () => {
  const charts = {{{json widgets}}}; // widgets passed as JSON

  const colors = [
    { border: '#0d6efd', background: 'rgba(13, 110, 253, 0.1)' }, // blue
    { border: '#198754', background: 'rgba(25, 135, 84, 0.1)' },  // green
    { border: '#dc3545', background: 'rgba(220, 53, 69, 0.1)' },  // red
    { border: '#fd7e14', background: 'rgba(253, 126, 20, 0.1)' }, // orange
    { border: '#6f42c1', background: 'rgba(111, 66, 193, 0.1)' }  // purple
  ];

  charts.forEach((w, i) => {
    const color = colors[i % colors.length]; // cycle through colors
    new Chart(document.getElementById(`chart-${i}`), {
      type: 'line',
      data: {
        labels: w.labels,
        datasets: [{
          data: w.data,
          borderColor: color.border,
          backgroundColor: color.background,
          fill: true,
          tension: 0.3
        }]
      },
      options: {
        plugins: { legend: { display: false } },
        scales: { x: { display: false }, y: { display: false } }
      }
    });
  });
});
</script>


</section>
